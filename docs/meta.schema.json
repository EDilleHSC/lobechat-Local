{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Agent Meta Schema",
  "description": "Schema for <file>.meta.json delivered to agents",
  "type": "object",
  "required": ["filename","routing_id","routed_from","routed_to","snapshot_id","routed_at","checksum_sha256","trust_header","rules_applied","contract_version"],
  "properties": {
    "filename": {"type":"string"},
    "routing_id": {"type":"string","pattern":"^[0-9a-fA-F-]{36,}"},
    "routed_from": {"type":"string"},
    "routed_to": {"type":"string"},
    "snapshot_id": {"type":"string"},
    "routed_at": {"type":"string","format":"date-time"},
    "checksum_sha256": {"type":"string","pattern":"^[0-9a-fA-F]{64}$"},
    "trust_header": {"type":"string"},
    "rules_applied": {"type":"array","items":{"type":"string"}},
    "contract_version": {"type":"string"},
    "notes": {"type":"string"}
  },
  "additionalProperties": false
}
